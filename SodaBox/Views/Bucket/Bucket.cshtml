@model BucketViewModel

<h1>Оформление заказа</h1>

@if (Model.cartItems == null || !Model.cartItems.Any())
{
    <p>Ваша корзина пуста</p>
}
else
{
    <script>
        var sum = @Model.sum;
    </script>

    <table class="table">
        <thead>
            <tr>
                <th>Напиток</th>
                <th>Количество</th>
                <th>Цена</th>
                <th>Итог</th>
                <th></th> <!-- Столбец для кнопки удаления -->
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.cartItems)
            {
                <tr>
                    <td>
                        <img src="@Url.Content($"~/{item.drink.imagePath}")" alt="@item.drink.name" style="width: 100px; height: 150px; margin-right: 10px;" />
                        @item.drink.name
                    </td>
                    <td>
                        <button onclick="updateCart(@item.drink.id, Math.max(@item.quantity - 1, 0))" @if (item.quantity <= 1)
                        {
                            <text>disabled</text>
                        }>-</button>
                        @item.quantity
                        <button onclick="updateCart(@item.drink.id, Math.min(@item.quantity + 1, @item.drink.quantity))" @if (item.quantity >= item.drink.quantity)
                        {
                            <text>disabled</text>
                        }>+</button>
                    </td>

                    <td>@item.drink.price руб.</td>
                    <td>@(item.drink.price * item.quantity) руб.</td>
                    <td>
                        <button onclick="deleteFromCart(@item.drink.id)" class="button-delete">
                            <img src="@Url.Content("~/images/bucket.svg")" alt="Удалить" />
                        </button>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <p>Общая сумма: @Model.sum руб.</p>

    
}

<div style="text-align: right; margin-bottom: 20px;">
    <button id="storeButton" class="button back" onclick="window.location.href = '/Store/Index'">
        <span class="button-text">Вернуться</span>
    </button>
</div>

<div style="text-align: right; margin-bottom: 20px;">
    @Html.AntiForgeryToken()
    <button id="payButton" class="button next-disabled" data-disabled="true" onclick="handlePayButtonClick()">
        <span class="button-text">Оплата</span>
    </button>
</div>

<script src="~/js/bucket.js"></script>
<link rel="stylesheet" href="~/css/bucket.css">
